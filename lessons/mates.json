[
  {
    "id": "mate_001",
    "title": "Back Rank Mate",
    "type": "puzzle",
    "fen": "6k1/5ppp/8/8/8/8/5PPP/5RK1 w - - 0 1",
    "sideToMove": "w",
    "goal": "Deliver immediate back-rank checkmate.",
    "hint": "The rook can invade the 8th rank with check.",
    "tips": [
      "Look at the black king's escape squares.",
      "If the flight squares are blocked by its own pawns, mating nets are near."
    ],
    "constraints": {
      "userSide": "w",
      "lockOtherSide": true,
      "restrictFromSquares": ["f1"],
      "restrictPieceTypes": ["R"],
      "enforceOnlyAllowedMoves": true
    },
    "solution": {
      "moves": ["f1f8"],
      "san": ["Rf8#"],
      "explanation": [
        "Rf8 is checkmate because the king has no legal escapes.",
        "Back-rank weaknesses are fatal when heavy pieces invade."
      ]
    },
    "responses": [
      {
        "ifUserMove": "f1f8",
        "message": "Excellent — back-rank mate delivered."
      },
      {
        "ifUserMove": "*",
        "message": "Try a forcing rook check on the back rank."
      }
    ]
  },
  {
    "id": "mate_002",
    "title": "Ladder Mate Finish",
    "type": "puzzle",
    "fen": "7k/6R1/6R1/8/8/8/8/6K1 w - - 0 1",
    "sideToMove": "w",
    "goal": "Use coordinated rooks to finish the mating net.",
    "hint": "One rook steps up to the 8th rank.",
    "tips": [
      "Ladder mates rely on cutting off ranks repeatedly.",
      "Keep both rooks protected while shrinking king space."
    ],
    "constraints": {
      "userSide": "w",
      "lockOtherSide": true,
      "restrictFromSquares": ["g7"],
      "restrictPieceTypes": ["R"],
      "enforceOnlyAllowedMoves": true
    },
    "solution": {
      "moves": ["g7g8"],
      "san": ["Rg8#"],
      "explanation": [
        "Rg8# seals the king on h8 with no escape squares.",
        "The supporting rook keeps g8 protected, completing the net."
      ]
    },
    "responses": [
      {
        "ifUserMove": "g7g8",
        "message": "Great execution of the ladder mate pattern."
      },
      {
        "ifUserMove": "*",
        "message": "Bring the top rook to the 8th rank to complete the mate."
      }
    ]
  },
  {
    "id": "mate_003",
    "title": "Queen Mate with King Support",
    "type": "puzzle",
    "fen": "7k/6Q1/6K1/8/8/8/8/8 w - - 0 1",
    "sideToMove": "w",
    "goal": "Deliver mate by coordinating queen and king.",
    "hint": "Move the queen to a checking square on the 8th rank.",
    "tips": [
      "A queen mate is strongest when your king removes escape squares.",
      "Always check if the checked king can capture your queen."
    ],
    "constraints": {
      "userSide": "w",
      "lockOtherSide": true,
      "restrictFromSquares": ["g7"],
      "restrictPieceTypes": ["Q"],
      "enforceOnlyAllowedMoves": true
    },
    "solution": {
      "moves": ["g7f8"],
      "san": ["Qf8#"],
      "explanation": [
        "Qf8# gives check while covering all king escapes.",
        "The white king on g6 supports the mating construction."
      ]
    },
    "responses": [
      {
        "ifUserMove": "g7f8",
        "message": "Correct — textbook queen-and-king mate."
      },
      {
        "ifUserMove": "*",
        "message": "Try a queen move to the 8th rank that keeps your queen safe."
      }
    ]
  },
  {
    "id": "endgame_001",
    "title": "Endgame: Promote the Passed Pawn",
    "type": "puzzle",
    "fen": "6k1/4P3/4K3/8/8/8/8/8 w - - 0 1",
    "sideToMove": "w",
    "goal": "Promote the passed pawn immediately.",
    "hint": "The pawn on e7 is one step away from queening.",
    "tips": [
      "Passed pawns should be pushed when safe.",
      "Promotion is often stronger than checking maneuvers in simple endings."
    ],
    "constraints": {
      "userSide": "w",
      "lockOtherSide": true,
      "restrictFromSquares": ["e7"],
      "restrictPieceTypes": ["P"],
      "enforceOnlyAllowedMoves": true
    },
    "solution": {
      "moves": ["e7e8Q"],
      "san": ["e8=Q"],
      "explanation": [
        "Promotion creates a queen and a decisive material advantage.",
        "Always evaluate if immediate promotion is legal and strongest."
      ]
    },
    "responses": [
      {
        "ifUserMove": "e7e8Q",
        "message": "Perfect — pawn promoted."
      },
      {
        "ifUserMove": "*",
        "message": "In this puzzle, focus on promoting the passed pawn."
      }
    ]
  },
  {
    "id": "endgame_002",
    "title": "Endgame Technique: Shoulder the King",
    "type": "demo",
    "fen": "8/8/4k3/8/4K3/8/4P3/8 w - - 0 1",
    "sideToMove": "w",
    "goal": "Use king activity to support your pawn advance.",
    "hint": "Start by improving king position with opposition ideas.",
    "tips": [
      "In king-and-pawn endings, king activity is often decisive.",
      "Opposition and shouldering help escort pawns to promotion."
    ],
    "constraints": {
      "userSide": "w",
      "lockOtherSide": true,
      "restrictFromSquares": [],
      "restrictPieceTypes": ["K"],
      "enforceOnlyAllowedMoves": false
    },
    "solution": {
      "moves": ["e4d4"],
      "san": ["Kd4"],
      "explanation": [
        "King centralization creates winning chances in pawn endings.",
        "Good endgame technique starts with active king play."
      ]
    },
    "responses": [
      {
        "ifUserMove": "*",
        "message": "Nice. Prioritize king activity before rushing pawn moves."
      }
    ]
  }
]
